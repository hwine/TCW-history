<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg viewBox="0 0 640 1400" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc>actdiag {
    # Communication Points
    # Releng -&gt; MOC
    give_ok_to_start_db_it_work
        -&gt; start_db_it_work ;
    # MOC -&gt; Releng
    give_ok_to_start_releng_bringup
        -&gt; start_selfserve_agents ;

    # main TCW flow
    tcw_start
        -&gt; close_trees
        -&gt; start_non_db_it_work
        -&gt; start_db_it_work
        -&gt; it_done_with_db
        -&gt; give_ok_to_start_releng_bringup
        -&gt; final_check
    -&gt; tcw_end;

    # RelEng shutdown
    close_trees
        -&gt; stop_bb_masters
        -&gt; stop_buildapi
        -&gt; stop_selfserve_agents
        -&gt; verify_no_db_connections
        -&gt; give_ok_to_start_db_it_work ;

    # RelEng bring up
    give_ok_to_start_releng_bringup
        -&gt; start_selfserve_agents
        -&gt; start_buildapi
        -&gt; start_bb_masters
        -&gt; monitor_production 
        -&gt; final_check ;

    # timing dependancies - show as hidden edges to force layout
    #create_scripts -&gt; tcw_start [style=none] ;

    lane MOC {
        label = "MOC" ;
        tcw_start [label="TCW Start" ];
        tcw_end [label="TCW End" ]; 
        give_ok_to_start_db_it_work ;
        give_ok_to_start_releng_bringup ;
    }

    lane IT {
        label = "IT" ;
        start_non_db_it_work;
        start_db_it_work ;
        it_done_with_db ;
    }

    lane releng {
        label = "RelEng";
        close_trees [label="Close Trees" ]; 

        stop_bb_masters ;
        stop_buildapi ;
        stop_selfserve_agents ;
        verify_no_db_connections ;

        start_selfserve_agents ;
        start_buildapi ;
        start_bb_masters  ;

        monitor_production [label="Monitor RelEng\nSystems" ]; 
    }
}
</desc>
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="606" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="286" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="686" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="846" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="1166" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="926" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="126" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="206" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="766" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="1246" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="1326" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="286" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="366" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="446" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="526" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="1006" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="1086" />
  <rect fill="#ffff99" height="62" stroke="#ffff99" width="192" x="32" y="38" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="27" x="128" y="74">MOC</text>
  <rect fill="#ffff99" height="62" stroke="#ffff99" width="192" x="224" y="38" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="9" x="320" y="74">IT</text>
  <rect fill="#ffff99" height="62" stroke="#ffff99" width="192" x="416" y="38" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="33" x="512" y="75">RelEng</text>
  <rect fill="none" height="1342" stroke="gray" width="576" x="32" y="38" />
  <path d="M 32 100 L 608 100" fill="none" stroke="gray" />
  <path d="M 224 38 L 224 1380" fill="none" stroke="gray" />
  <path d="M 416 38 L 416 1380" fill="none" stroke="gray" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="600" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="128" x="128" y="620">give_ok_to_start_db_it_w</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="16" x="128" y="632">ork</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="280" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="108" x="320" y="306">start_non_db_it_work</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="680" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="84" x="320" y="706">start_db_it_work</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="840" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="125" x="128" y="859">give_ok_to_start_releng_</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="128" y="873">bringup</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="1160" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="75" x="512" y="1179">Monitor RelEng</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="44" x="512" y="1193">Systems</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="920" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="113" x="512" y="947">start_selfserve_agents</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="120" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="55" x="128" y="145">TCW Start</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="200" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="512" y="225">Close Trees</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="760" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="81" x="320" y="786">it_done_with_db</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="1240" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="56" x="128" y="1266">final_check</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="1320" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="128" y="1345">TCW End</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="280" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="86" x="512" y="306">stop_bb_masters</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="360" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="63" x="512" y="386">stop_buildapi</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="440" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="111" x="512" y="467">stop_selfserve_agents</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="520" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="124" x="512" y="540">verify_no_db_connection</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="6" x="512" y="552">s</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="1000" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="65" x="512" y="1026">start_buildapi</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="1080" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="88" x="512" y="1106">start_bb_masters</text>
  <path d="M 128 640 L 128 660" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 660 L 320 660" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 660 L 320 672" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,679 316,672 324,672 320,679" stroke="rgb(0,0,0)" />
  <path d="M 320 720 L 320 752" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,759 316,752 324,752 320,759" stroke="rgb(0,0,0)" />
  <path d="M 128 880 L 128 900" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 900 L 512 900" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 512 900 L 512 912" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,919 508,912 516,912 512,919" stroke="rgb(0,0,0)" />
  <path d="M 128 880 L 128 1232" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,1239 124,1232 132,1232 128,1239" stroke="rgb(0,0,0)" />
  <path d="M 512 960 L 512 992" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,999 508,992 516,992 512,999" stroke="rgb(0,0,0)" />
  <path d="M 128 160 L 128 180" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 180 L 512 180" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 512 180 L 512 192" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,199 508,192 516,192 512,199" stroke="rgb(0,0,0)" />
  <path d="M 512 240 L 512 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 260 L 512 260" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 320 260 L 320 272" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,279 316,272 324,272 320,279" stroke="rgb(0,0,0)" />
  <path d="M 512 240 L 512 272" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,279 508,272 516,272 512,279" stroke="rgb(0,0,0)" />
  <path d="M 320 320 L 320 672" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="320,679 316,672 324,672 320,679" stroke="rgb(0,0,0)" />
  <path d="M 320 800 L 320 820" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 820 L 320 820" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 820 L 128 832" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,839 124,832 132,832 128,839" stroke="rgb(0,0,0)" />
  <path d="M 128 1280 L 128 1312" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,1319 124,1312 132,1312 128,1319" stroke="rgb(0,0,0)" />
  <path d="M 512 320 L 512 352" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,359 508,352 516,352 512,359" stroke="rgb(0,0,0)" />
  <path d="M 512 400 L 512 432" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,439 508,432 516,432 512,439" stroke="rgb(0,0,0)" />
  <path d="M 512 480 L 512 512" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,519 508,512 516,512 512,519" stroke="rgb(0,0,0)" />
  <path d="M 512 560 L 512 580" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 580 L 316 580" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 316.0 580.0 A4,4 0 0 1 324.0 580.0" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 324 580 L 512 580" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 580 L 128 592" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,599 124,592 132,592 128,599" stroke="rgb(0,0,0)" />
  <path d="M 512 1040 L 512 1072" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,1079 508,1072 516,1072 512,1079" stroke="rgb(0,0,0)" />
  <path d="M 512 1120 L 512 1152" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="512,1159 508,1152 516,1152 512,1159" stroke="rgb(0,0,0)" />
  <path d="M 512 1200 L 512 1220" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 1220 L 512 1220" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 128 1220 L 128 1232" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="128,1239 124,1232 132,1232 128,1239" stroke="rgb(0,0,0)" />
</svg>
